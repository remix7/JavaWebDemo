<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>
	<input type="button" id="b1" name="b1" value="测试与服务器之间的通讯"/>
	<div id="div">
		
	</div>
	<script type="text/javascript">
		window.onload=function(){//页面加载完成才执行
			document.getElementById("b1").onclick=function(){
				//ajax代码
				//得到XmlHttpRequest对象
				var xhr = createXmlHttpRequest();
				//建立与服务器的链接
				xhr.open("GET","/MyAptanaTest/ServletDemo1?time="+new Date().getTime());
				//发送数据
				xhr.send();
				//接收返回的数据 
				xhr.onreadystatechange=function(){
					if(xhr.readyState==4){
						//能获取完整数据  开始真正的处理
						if(xhr.status==200||xhr.status==304);
						//服务器返回正常
						var date = xhr.responseText;
						var textNode = document.createTextNode(date);
						document.getElementById("div").appendChild(textNode);
					}
				}
			}
		}
		function createXmlHttpRequest(){
		   var xmlHttp;
		   try{    //Firefox, Opera 8.0+, Safari
		           xmlHttp=new XMLHttpRequest();
		    }catch (e){
		           try{    //Internet Explorer
		                  xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
		            }catch (e){
		                  try{
		                          xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
		                  }catch (e){}  
		           }
		    }
		   return xmlHttp;
		 }
	</script>
</body>
</html>